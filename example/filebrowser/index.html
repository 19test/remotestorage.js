<html>
  <body>
    <div id="widget"></div>
    <a onclick="displayFolded('/');"}>/ <- click me</a><ul id="/"></ul>
    <div id="source"></div>
    <script src="../../build/latest/remoteStorage-debug.js"></script>
    <script src="../../src/modules/root.js"></script>
    <script id="real-source">
      remoteStorage.displayWidget('widget'); // the thing you see in the top right
      remoteStorage.loadModule('root', 'r'); // 'r' for read-only access
      function displayFolded(path) {
        if(path.substr(-1) != '/') { // Only directory names end in a slash and can be listed
          return;
        }
        var listing = remoteStorage.root.getListing(path); // returns an array of strings
        var str = '';
        if(listing.length > 0) {
          for(var i=0; i<listing.length; i++) { // construct the HTML
            str += '<li><a onclick="displayFolded(\''+path+listing[i]+'\');"}>'+listing[i]+'</a><ul id="'+path+listing[i]+'"></ul></li>';
          }
        } else {
          str = "<li><em>(No entries, go create some using one of the other examples)</em></li>";
        }
        document.getElementById(path).innerHTML = str; // insert the HTML into the DOM
      }
    </script>
    <script>
      document.getElementById('source').innerHTML = '<h3>Code:</h3><pre><code>' + document.getElementById('real-source').innerHTML.replace(/>/g, '&gt;').replace(/</g, '&lt;') + '</code></pre>';
    </script>
  </body>
</html>
